<!DOCTYPE html>
<html lang="pt-br">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>P√°gina do Paciente | Sa√∫de+</title>
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;600;700&display=swap" rel="stylesheet">
  <style>
    :root {
      --primary: #2c5282;
      --secondary: #3182ce;
      --accent: #4299e1;
      --bg: #f7fafc;
      --card-bg: #fff;
      --text: #2d3748;
      --muted: #718096;
      --radius: 16px;
      --shadow: 0 8px 24px rgba(0, 0, 0, 0.08);
    }

    * { box-sizing: border-box; }
    body {
      margin: 0;
      font-family: "Poppins", sans-serif;
      background: var(--bg);
      color: var(--text);
    }

    header {
      background: var(--card-bg);
      box-shadow: var(--shadow);
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 14px 40px;
      position: sticky;
      top: 0;
      z-index: 10;
    }

    .logo h1 {
      color: var(--primary);
      font-weight: 700;
      font-size: 26px;
      margin: 0;
    }

    nav ul {
      display: flex;
      list-style: none;
      gap: 30px;
      margin: 0;
      padding: 0;
    }

    nav a {
      text-decoration: none;
      color: var(--text);
      font-weight: 500;
      padding: 8px 14px;
      border-radius: 10px;
      transition: 0.2s;
    }

    nav a:hover {
      background: var(--secondary);
      color: #fff;
    }

    main {
      max-width: 1200px;
      margin: 40px auto;
      padding: 0 20px;
      display: grid;
      gap: 40px;
    }

    /* ===== CARD BASE ===== */
    .card {
      background: var(--card-bg);
      border-radius: var(--radius);
      box-shadow: var(--shadow);
      padding: 25px 30px;
      transition: 0.3s ease;
    }

    .card:not(#agendamento, #pagamentos):hover {
      transform: translateY(-4px);
      box-shadow: 0 12px 28px rgba(0, 0, 0, 0.12);
    }

    h2 {
      color: var(--secondary);
      font-size: 22px;
      margin-bottom: 25px;
    }

    /* ===== PERFIL ===== */
    .perfil-info {
      display: flex;
      align-items: center;
      gap: 25px;
      flex-wrap: wrap;
    }

    .perfil-icon {
      width: 120px;
      height: 120px;
      display: flex;
      align-items: center;
      justify-content: center;
      background: linear-gradient(145deg, var(--accent), var(--secondary));
      border-radius: 50%;
      color: white;
    }

    .detalhes p {
      margin: 6px 0;
    }
    
    .detalhes strong {
      color: var(--secondary);
    }

    /* ===== CONSULTAS ===== */
    .consultas-lista {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
      gap: 20px;
    }

    .consulta-card {
      background: #f8fbff;
      border-left: 5px solid var(--secondary);
      border-radius: var(--radius);
      padding: 18px;
      box-shadow: var(--shadow);
    }

    .consulta-card h4 {
      margin: 0 0 8px;
      color: var(--primary);
    }

    .consulta-card p {
      margin: 4px 0;
      font-size: 15px;
    }

    .status {
      display: inline-block;
      padding: 5px 12px;
      border-radius: 10px;
      font-size: 13px;
      font-weight: 600;
      color: #fff;
    }

    .status.confirmada { background: #38a169; }
    .status.pendente { background: #dd6b20; }

  
    .urgency-display { margin-top: 12px; }
    .urgency-display p { font-size: 13px; margin: 0 0 5px; color: var(--muted); }
    .urgency-bar-bg { background: #e2e8f0; border-radius: 10px; height: 8px; overflow: hidden; }
    .urgency-bar { height: 100%; border-radius: 10px; transition: width 0.5s; }
    .urgency-bar.low {
      width: 20%; background: linear-gradient(90deg, #63b3ed, #4299e1);
    }
    .urgency-bar.medium {
      width: 60%; background: linear-gradient(90deg, #f6ad55, #ed8936);
    }
    .urgency-bar.high {
      width: 100%; background: linear-gradient(90deg, #f56565, #e53e3e);
    }

    /* ===== PAGAMENTOS ===== */
    .pagamentos-lista { display: grid; gap: 20px; }
    .pagamento-card {
      display: flex;
      justify-content: space-between;
      align-items: center;
      flex-wrap: wrap;
      background: #f8fbff;
      padding: 20px;
      border-radius: var(--radius);
      border: 1px solid #e2e8f0;
    }
    .pagamento-info h4 { margin: 0 0 5px; color: var(--text); }
    .pagamento-info p { margin: 0; color: var(--muted); font-size: 14px; }
    .pagamento-info p strong { color: var(--primary); font-size: 16px; }
    .pagamento-acoes { display: flex; gap: 10px; margin-top: 10px; }
    .pagamento-acoes button {
      padding: 8px 16px;
      font-size: 14px;
      font-weight: 600;
    }
    .btn-pix { background: #38A169 !important; }
    .btn-boleto { background: #DD6B20 !important; }

    /* ===== AGENDAMENTO ===== */
    form {
      display: grid;
      gap: 20px;
    }

    label {
      font-weight: 600;
      color: var(--text);
    }

    select, input {
      width: 100%;
      padding: 12px;
      border: 2px solid #e2e8f0;
      border-radius: 10px;
      font-size: 15px;
      outline: none;
      transition: 0.2s;
    }

    select:focus, input:focus {
      border-color: var(--secondary);
      box-shadow: 0 0 0 3px rgba(49,130,206,0.2);
    }

    /* N√≠vel de Dor/Urg√™ncia */
    .urgency-slider { display: grid; gap: 10px; }
    .urgency-slider input[type="range"] {
      -webkit-appearance: none;
      appearance: none;
      width: 100%;
      height: 8px;
      background: #e2e8f0;
      border-radius: 5px;
      outline: none;
    }
    .urgency-slider input[type="range"]::-webkit-slider-thumb {
      -webkit-appearance: none;
      appearance: none;
      width: 20px;
      height: 20px;
      background: var(--secondary);
      cursor: pointer;
      border-radius: 50%;
      transition: background 0.2s;
    }
    .urgency-slider input[type="range"]::-webkit-slider-thumb:hover { background: var(--primary); }
    .slider-labels { display: flex; justify-content: space-between; font-size: 13px; color: var(--muted); }

    #horarios, #dentistas { display: none; }
    #lista-horarios { display: flex; flex-wrap: wrap; gap: 10px; }
    #lista-horarios button { background: #e2e8f0; color: var(--text); padding: 8px 15px; border-radius: 8px; cursor: pointer; border: none; }
    #lista-horarios button.active { background: var(--secondary); color: white; }

    button {
      background: var(--secondary);
      color: #fff;
      border: none;
      border-radius: 10px;
      padding: 14px;
      font-weight: 600;
      cursor: pointer;
      transition: 0.3s;
    }

    button:hover {
      background: var(--primary);
      transform: translateY(-1px);
      box-shadow: 0 8px 16px rgba(49,130,206,0.3);
    }
    
    /* Modal de Pagamento */
    .modal {
      display: none; position: fixed; z-index: 1000; left: 0; top: 0;
      width: 100%; height: 100%; overflow: auto; background-color: rgba(0,0,0,0.6);
      justify-content: center; align-items: center;
    }
    .modal-content {
      background: var(--card-bg); border-radius: var(--radius); padding: 30px 40px;
      width: 90%; max-width: 450px; box-shadow: 0 10px 30px rgba(0,0,0,0.2);
      animation: slide-down 0.4s ease-out;
    }
    @keyframes slide-down { from { transform: translateY(-30px); opacity: 0; } to { transform: translateY(0); opacity: 1; } }
    .payment-content { text-align: center; }
    .payment-content img.qr-code { width: 200px; height: 200px; margin: 15px auto; display: block; border: 1px solid #ccc; padding: 5px; }
    .payment-content .barcode { font-family: 'Libre Barcode 39', cursive; font-size: 48px; margin: 20px 0; display: block; }
    .payment-info-modal { background: #f8fbff; padding: 15px; border-radius: 10px; margin-top: 20px; word-wrap: break-word; }
    .payment-info-modal p { margin: 5px 0; color: var(--muted); }
    .payment-info-modal strong { color: var(--text); }
    .btn-copy { background: var(--muted); color: white; border: none; padding: 8px 12px; border-radius: 8px; cursor: pointer; margin-left: 10px; font-size: 12px; }

    footer {
      text-align: center;
      padding: 30px 0;
      color: var(--muted);
      font-size: 14px;
    }
  </style>
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/flatpickr/dist/flatpickr.min.css">
  <link href="https://fonts.googleapis.com/css?family=Libre+Barcode+39&display=swap" rel="stylesheet">

</head>
<body>
  <header>
    <div class="logo"><h1>Dentrix</h1></div>
    <nav>
      <ul>
        <li><a href="#perfil">Perfil</a></li>
        <li><a href="#consultas">Consultas</a></li>
        <li><a href="#agendamento">Agendar</a></li>
        <li><a href="#pagamentos">Pagamentos</a></li>
      </ul>
    </nav>
  </header>

  <main>
    <!-- PERFIL -->
    <section id="perfil" class="card">
      <h2>üë§ Perfil do Paciente</h2>
      <div class="perfil-info">
        <div class="perfil-icon">
          <svg xmlns="http://www.w3.org/2000/svg" width="60" height="60" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"><path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"></path><circle cx="12" cy="7" r="4"></circle></svg>
        </div>
        <div class="detalhes">
          <p><strong>Nome:</strong> Jo√£o da Silva</p>
          <p><strong>Email:</strong> joao.silva@email.com</p>
          <p><strong>Data de Nascimento:</strong> 15/05/1985</p>
          <p><strong>Endere√ßo:</strong> Rua das Flores, 123, S√£o Paulo - SP</p>
        </div>
      </div>
    </section>

    <!-- CONSULTAS -->
    <section id="consultas" class="card">
      <h2>üìÖ Consultas Marcadas</h2>
      <div class="consultas-lista">
        <div class="consulta-card">
          <h4>Limpeza de Rotina</h4>
          <p><strong>Data:</strong> 25/10/2025</p>
          <p><strong>Hora:</strong> 14:00</p>
          <p><strong>Profissional:</strong> Dra. Camila Ribeiro</p>
          <div class="urgency-display">
            <p>N√≠vel de Urg√™ncia: Baixo</p>
            <div class="urgency-bar-bg"><div class="urgency-bar low"></div></div>
          </div>
        </div>
        <div class="consulta-card">
          <h4>Avalia√ß√£o de Implante</h4>
          <p><strong>Data:</strong> 30/10/2025</p>
          <p><strong>Hora:</strong> 09:30</p>
          <p><strong>Profissional:</strong> Dra. Maria Silva</p>
          <div class="urgency-display">
            <p>N√≠vel de Urg√™ncia: M√©dio</p>
            <div class="urgency-bar-bg"><div class="urgency-bar medium"></div></div>
          </div>
        </div>
      </div>
    </section>

    <!-- PAGAMENTOS -->
    <section id="pagamentos" class="card">
      <h2>üí≥ Pagamentos Pendentes</h2>
      <div class="pagamentos-lista">
        <div class="pagamento-card">
          <div class="pagamento-info">
            <h4>Consulta de Limpeza - 25/10/2025</h4>
            <p><strong>Valor: R$ 150,00</strong></p>
          </div>
          <div class="pagamento-acoes">
            <button class="btn-pix" onclick="abrirModalPagamento('pix')">Pagar com PIX</button>
            <button class="btn-boleto" onclick="abrirModalPagamento('boleto')">Gerar Boleto</button>
          </div>
        </div>
        <div class="pagamento-card">
          <div class="pagamento-info">
            <h4>Avalia√ß√£o de Implante - 30/10/2025</h4>
            <p><strong>Valor: R$ 250,00</strong></p>
          </div>
          <div class="pagamento-acoes">
            <button class="btn-pix" onclick="abrirModalPagamento('pix')">Pagar com PIX</button>
            <button class="btn-boleto" onclick="abrirModalPagamento('boleto')">Gerar Boleto</button>
          </div>
        </div>
      </div>
    </section>

    <!-- AGENDAR -->
    <section id="agendamento" class="card">
        <h2>Agendar Consulta</h2>
    <form id="form-agendamento" onsubmit="handleAgendamento(event)">
      <div>
        <label for="tipo-consulta">üìÑ Tipo de Consulta:</label>
        <select id="tipo-consulta" name="tipo-consulta" required>
          <option value="" disabled selected>Selecione o motivo</option>
          <option value="Limpeza">Limpeza / Profilaxia</option>
          <option value="Restauracao">Restaura√ß√£o</option>
          <option value="Clareamento">Clareamento Dental</option>
          <option value="Avaliacao">Avalia√ß√£o / Or√ßamento</option>
          <option value="Urgencia">Atendimento de Urg√™ncia</option>
          <option value="Outro">Outro</option>
        </select>
      </div>

      <label for="data-consulta">üìÖ Escolha o dia:</label>
      <input type="text" id="data-consulta" name="data-consulta" placeholder="Selecione a data" required>

      <div class="horarios" id="horarios">
        <label>‚è∞ Hor√°rios dispon√≠veis:</label>
        <div id="lista-horarios"></div>
      </div>
      
      <div class="urgency-slider">
        <label for="urgency-level">üö® N√≠vel de Dor / Urg√™ncia:</label>
        <input type="range" id="urgency-level" name="urgency-level" min="1" max="5" value="1">
        <div class="slider-labels">
          <span>Baixo</span>
          <span>Urgente</span>
        </div>
      </div>

      <div class="dentistas" id="dentistas">
        <label>ü¶∑ Profissionais dispon√≠veis:</label>
        <div class="opcao">
          <label>
            <input type="radio" name="dentista" value="Camila Ribeiro" required>
            <span></span>
            <p>Dra. Camila</p>
          </label>
        </div>
        <div class="opcao">
          <label>
            <input type="radio" name="dentista" value="Lucas Andrade" required>
            <span></span>
            <p>Dr. Lucas</p>
          </label>
        </div>
        <div class="opcao">
          <label>
            <input type="radio" name="dentista" value="Renata Melo" required>
            <span></span>
            <p>Dra. Renata</p>
          </label>
        </div>
      </div>

      <button type="submit" class="submit">Confirmar Agendamento</button>

      <p id="mensagem" style="display: none; text-align: center; padding: 10px; border-radius: 8px;"></p>
    </form>
     
    </section>
  </main>

  <footer>
    <p>¬© 2025 Sa√∫de+ | Todos os direitos reservados</p>
  </footer>

  <!-- Modal para Pagamento -->
  <div id="modalPagamento" class="modal">
    <div class="modal-content">
      <div id="payment-container"></div>
      <button type="button" onclick="fecharModalPagamento()" style="width: 100%; margin-top: 20px;">Fechar</button>
    </div>
  </div>

  <!-- Scripts -->
  <script src="https://cdn.jsdelivr.net/npm/flatpickr"></script>
  <script src="https://cdn.jsdelivr.net/npm/flatpickr/dist/l10n/pt.js"></script>

  <script>
    document.addEventListener('DOMContentLoaded', () => {
      const horariosDiv = document.getElementById("horarios");
      const listaHorarios = document.getElementById("lista-horarios");
      const dentistasDiv = document.getElementById("dentistas");
      const mensagem = document.getElementById("mensagem");
      const consultasListaDiv = document.querySelector('.consultas-lista');
      const pagamentosListaDiv = document.querySelector('.pagamentos-lista');

      // Carrega dados do localStorage
      let consultas = JSON.parse(localStorage.getItem('consultasPaciente')) || [];
      let pagamentos = JSON.parse(localStorage.getItem('pagamentosPaciente')) || [];

      const horariosDisponiveis = ["09:00", "10:00", "11:00", "13:00", "14:00", "15:00", "16:00"];

      flatpickr("#data-consulta", {
        dateFormat: "d/m/Y",
        minDate: "today",
        locale: "pt",
        disableMobile: true,
        onChange: function() {
          horariosDiv.style.display = "grid";
          dentistasDiv.style.display = "none";
          listaHorarios.innerHTML = "";

          horariosDisponiveis.forEach(hora => {
            const btn = document.createElement("button");
            btn.textContent = hora;
            btn.type = "button";
            btn.addEventListener("click", () => {
              document.querySelectorAll("#lista-horarios button").forEach(b => b.classList.remove("active"));
              btn.classList.add("active");
              dentistasDiv.style.display = "block";
            });
            listaHorarios.appendChild(btn);
          });
        }
      });

      window.handleAgendamento = function(e) {
        e.preventDefault();
        const form = document.getElementById("form-agendamento");
        const tipo = document.getElementById("tipo-consulta").value;
        const data = document.getElementById("data-consulta").value;
        const hora = document.querySelector("#lista-horarios button.active")?.textContent;
        const dentista = document.querySelector("input[name='dentista']:checked")?.value;
        const urgenciaValue = document.getElementById("urgency-level").value;

        if (!hora || !dentista) {
          mensagem.style.display = "block";
          mensagem.style.background = "#fed7d7";
          mensagem.style.color = "#c53030";
          mensagem.textContent = "‚ö†Ô∏è Por favor, selecione data, hor√°rio e profissional.";
          return;
        }

        const novaConsulta = {
          id: Date.now(),
          tipo, data, hora, dentista, urgencia: urgenciaValue
        };

        const novoPagamento = {
          consultaId: novaConsulta.id,
          descricao: `Consulta de ${tipo} - ${data}`,
          valor: (Math.random() * (300 - 100) + 100).toFixed(2) // Valor aleat√≥rio entre 100 e 300
        };

        consultas.push(novaConsulta);
        pagamentos.push(novoPagamento);

        localStorage.setItem('consultasPaciente', JSON.stringify(consultas));
        localStorage.setItem('pagamentosPaciente', JSON.stringify(pagamentos));

        renderizarConsultas();
        renderizarPagamentos();

        mensagem.style.display = "block";
        mensagem.style.background = "#c6f6d5";
        mensagem.style.color = "#2f855a";
        mensagem.textContent = `‚úÖ Agendamento confirmado! Um novo pagamento foi gerado.`;
        form.reset();
        horariosDiv.style.display = "none";
        dentistasDiv.style.display = "none";
      }

      function renderizarConsultas() {
        consultasListaDiv.innerHTML = '';
        if (consultas.length === 0) {
          consultasListaDiv.innerHTML = '<p>Nenhuma consulta agendada.</p>';
          return;
        }
        consultas.forEach(c => {
          let urgenciaClass = 'low';
          let urgenciaTexto = 'Baixo';
          if (c.urgencia > 3) { urgenciaClass = 'high'; urgenciaTexto = 'Urgente'; }
          else if (c.urgencia > 1) { urgenciaClass = 'medium'; urgenciaTexto = 'M√©dio'; }

          const cardHtml = `
            <div class="consulta-card">
              <h4>${c.tipo}</h4>
              <p><strong>Data:</strong> ${c.data}</p>
              <p><strong>Hora:</strong> ${c.hora}</p>
              <p><strong>Profissional:</strong> ${c.dentista}</p>
              <div class="urgency-display">
                <p>N√≠vel de Urg√™ncia: ${urgenciaTexto}</p>
                <div class="urgency-bar-bg"><div class="urgency-bar ${urgenciaClass}"></div></div>
              </div>
            </div>
          `;
          consultasListaDiv.innerHTML += cardHtml;
        });
      }

      function renderizarPagamentos() {
        pagamentosListaDiv.innerHTML = '';
        if (pagamentos.length === 0) {
          pagamentosListaDiv.innerHTML = '<p>Nenhum pagamento pendente.</p>';
          return;
        }
        pagamentos.forEach(p => {
          const cardHtml = `
            <div class="pagamento-card">
              <div class="pagamento-info">
                <h4>${p.descricao}</h4>
                <p><strong>Valor: R$ ${p.valor}</strong></p>
              </div>
              <div class="pagamento-acoes">
                <button class="btn-pix" onclick="abrirModalPagamento('pix')">Pagar com PIX</button>
                <button class="btn-boleto" onclick="abrirModalPagamento('boleto')">Gerar Boleto</button>
              </div>
            </div>
          `;
          pagamentosListaDiv.innerHTML += cardHtml;
        });
      }

      // Fun√ß√µes do Modal de Pagamento (globais para o onclick funcionar)
      const modalPagamento = document.getElementById("modalPagamento");
      const paymentContainer = document.getElementById('payment-container');

      window.abrirModalPagamento = function(tipo) {
        if (tipo === 'pix') {
          paymentContainer.innerHTML = `
            <div class="payment-content">
              <h3>Pagamento via PIX</h3>
              <p>Aponte a c√¢mera do seu celular para o QR Code</p>
              <img src="https://upload.wikimedia.org/wikipedia/commons/thumb/d/d0/QR_code_for_mobile_English_Wikipedia.svg/1200px-QR_code_for_mobile_English_Wikipedia.svg.png" alt="QR Code" class="qr-code">
              <div class="payment-info-modal">
                <p><strong>Ou use a chave PIX (Copia e Cola):</strong></p>
                <p>99.123.456/0001-78 <button class="btn-copy" onclick="copiarTexto('99.123.456/0001-78')">Copiar</button></p>
              </div>
            </div>
          `;
        } else if (tipo === 'boleto') {
          paymentContainer.innerHTML = `
            <div class="payment-content">
              <h3>Pagamento via Boleto</h3>
              <p>Use o c√≥digo de barras no seu app do banco</p>
              <div class="barcode">*123456789012345*</div>
              <div class="payment-info-modal">
                <p><strong>Linha Digit√°vel:</strong></p>
                <p>12345.67890 12345.678901 23456.789012 3 12345678901234 <button class="btn-copy" onclick="copiarTexto('12345.67890 12345.678901 23456.789012 3 12345678901234')">Copiar</button></p>
              </div>
            </div>
          `;
        }
        modalPagamento.style.display = "flex";
      }

      window.fecharModalPagamento = function() { modalPagamento.style.display = "none"; }
      window.copiarTexto = function(texto) { navigator.clipboard.writeText(texto).then(() => alert('Copiado para a √°rea de transfer√™ncia!')); }

      // Renderiza√ß√£o inicial
      renderizarConsultas();
      renderizarPagamentos();
    });
  </script>
</body>
</html>
